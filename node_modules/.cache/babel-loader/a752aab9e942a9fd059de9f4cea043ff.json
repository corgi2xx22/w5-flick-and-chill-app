{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hellentrinh/Desktop/flick-and-chill/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hellentrinh/Desktop/flick-and-chill/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hellentrinh/Desktop/flick-and-chill/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import SwiperCore,{Autoplay}from'swiper';import{Swiper,SwiperSlide}from'swiper/react';import Button,{OutlineButton}from'../button/Button';import Modal,{ModalContent}from'../modal/Modal';import tmdbApi,{category,movieType}from'../../api/tmdbApi';import apiConfig from'../../api/apiConfig';import'./hero-slide.scss';import{useHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HeroSlide=function HeroSlide(){SwiperCore.use([Autoplay]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movieItems=_useState2[0],setMovieItems=_useState2[1];useEffect(function(){var getMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var params,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params={page:1};_context.prev=1;_context.next=4;return tmdbApi.getMoviesList(movieType.popular,{params:params});case 4:response=_context.sent;setMovieItems(response.results.slice(1,4));console.log(response);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log('error');case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function getMovies(){return _ref.apply(this,arguments);};}();getMovies();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"hero-slide\",children:[/*#__PURE__*/_jsx(Swiper,{modules:[Autoplay],grabCursor:true,spaceBetween:0,slidesPerView:1// autoplay={{delay: 3000}}\n,children:movieItems.map(function(item,i){return/*#__PURE__*/_jsx(SwiperSlide,{children:function children(_ref2){var isActive=_ref2.isActive;return/*#__PURE__*/_jsx(HeroSlideItem,{item:item,className:\"\".concat(isActive?'active':'')});}},i);})}),movieItems.map(function(item,i){return/*#__PURE__*/_jsx(TrailerModal,{item:item},i);})]});};var HeroSlideItem=function HeroSlideItem(props){var hisrory=useHistory();var item=props.item;var background=apiConfig.originalImage(item.backdrop_path?item.backdrop_path:item.poster_path);var setModalActive=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var modal,videos,videSrc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:modal=document.querySelector(\"#modal_\".concat(item.id));_context2.next=3;return tmdbApi.getVideos(category.movie,item.id);case 3:videos=_context2.sent;if(videos.results.length>0){videSrc='https://www.youtube.com/embed/'+videos.results[0].key;modal.querySelector('.modal__content > iframe').setAttribute('src',videSrc);}else{modal.querySelector('.modal__content').innerHTML='No trailer';}modal.classList.toggle('active');case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function setModalActive(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"hero-slide__item \".concat(props.className),style:{backgroundImage:\"url(\".concat(background,\")\")},children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-slide__item__content container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-slide__item__content__info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:item.title}),/*#__PURE__*/_jsx(\"div\",{className:\"overview\",children:item.overview}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return hisrory.push('/movie/'+item.id);},children:\"Watch now\"}),/*#__PURE__*/_jsx(OutlineButton,{onClick:setModalActive,children:\"Watch trailer\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hero-slide__item__content__poster\",children:/*#__PURE__*/_jsx(\"img\",{src:apiConfig.w500Image(item.poster_path),alt:\"\"})})]})});};var TrailerModal=function TrailerModal(props){var item=props.item;var iframeRef=useRef(null);var onClose=function onClose(){return iframeRef.current.setAttribute('src','');};return/*#__PURE__*/_jsx(Modal,{active:false,id:\"modal_\".concat(item.id),children:/*#__PURE__*/_jsx(ModalContent,{onClose:onClose,children:/*#__PURE__*/_jsx(\"iframe\",{ref:iframeRef,width:\"100%\",height:\"500px\",title:\"trailer\"})})});};export default HeroSlide;","map":{"version":3,"sources":["/Users/hellentrinh/Desktop/flick-and-chill/src/components/hero-slide/HeroSlide.jsx"],"names":["React","useState","useEffect","useRef","SwiperCore","Autoplay","Swiper","SwiperSlide","Button","OutlineButton","Modal","ModalContent","tmdbApi","category","movieType","apiConfig","useHistory","HeroSlide","use","movieItems","setMovieItems","getMovies","params","page","getMoviesList","popular","response","results","slice","console","log","map","item","i","isActive","HeroSlideItem","props","hisrory","background","originalImage","backdrop_path","poster_path","setModalActive","modal","document","querySelector","id","getVideos","movie","videos","length","videSrc","key","setAttribute","innerHTML","classList","toggle","className","backgroundImage","title","overview","push","w500Image","TrailerModal","iframeRef","onClose","current"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nimport SwiperCore, { Autoplay } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\n\nimport Button, { OutlineButton } from '../button/Button';\nimport Modal, { ModalContent } from '../modal/Modal';\n\nimport tmdbApi, { category, movieType } from '../../api/tmdbApi';\nimport apiConfig from '../../api/apiConfig';\n\nimport './hero-slide.scss';\nimport { useHistory } from 'react-router';\n\nconst HeroSlide = () => {\n\n    SwiperCore.use([Autoplay]);\n\n    const [movieItems, setMovieItems] = useState([]);\n\n    useEffect(() => {\n        const getMovies = async () => {\n            const params = {page: 1}\n            try {\n                const response = await tmdbApi.getMoviesList(movieType.popular, {params});\n                setMovieItems(response.results.slice(1, 4));\n                console.log(response);\n            } catch {\n                console.log('error');\n            }\n        }\n        getMovies();\n    }, []);\n\n    return (\n        <div className=\"hero-slide\">\n            <Swiper\n                modules={[Autoplay]}\n                grabCursor={true}\n                spaceBetween={0}\n                slidesPerView={1}\n                // autoplay={{delay: 3000}}\n            >\n                {\n                    movieItems.map((item, i) => (\n                        <SwiperSlide key={i}>\n                            {({ isActive }) => (\n                                <HeroSlideItem item={item} className={`${isActive ? 'active' : ''}`} />\n                            )}\n                        </SwiperSlide>\n                    ))\n                }\n            </Swiper>\n            {\n                movieItems.map((item, i) => <TrailerModal key={i} item={item}/>)\n            }\n        </div>\n    );\n}\n\nconst HeroSlideItem = props => {\n\n    let hisrory = useHistory();\n\n    const item = props.item;\n\n    const background = apiConfig.originalImage(item.backdrop_path ? item.backdrop_path : item.poster_path);\n\n    const setModalActive = async () => {\n        const modal = document.querySelector(`#modal_${item.id}`);\n\n        const videos = await tmdbApi.getVideos(category.movie, item.id);\n\n        if (videos.results.length > 0) {\n            const videSrc = 'https://www.youtube.com/embed/' + videos.results[0].key;\n            modal.querySelector('.modal__content > iframe').setAttribute('src', videSrc);\n        } else {\n            modal.querySelector('.modal__content').innerHTML = 'No trailer';\n        }\n\n        modal.classList.toggle('active');\n    }\n\n    return (\n        <div\n            className={`hero-slide__item ${props.className}`}\n            style={{backgroundImage: `url(${background})`}}\n        >\n            <div className=\"hero-slide__item__content container\">\n                <div className=\"hero-slide__item__content__info\">\n                    <h2 className=\"title\">{item.title}</h2>\n                    <div className=\"overview\">{item.overview}</div>\n                    <div className=\"btns\">\n                        <Button onClick={() => hisrory.push('/movie/' + item.id)}>\n                            Watch now\n                        </Button>\n                        <OutlineButton onClick={setModalActive}>\n                            Watch trailer\n                        </OutlineButton>\n                    </div>\n                </div>\n                <div className=\"hero-slide__item__content__poster\">\n                    <img src={apiConfig.w500Image(item.poster_path)} alt=\"\" />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nconst TrailerModal = props => {\n    const item = props.item;\n\n    const iframeRef = useRef(null);\n\n    const onClose = () => iframeRef.current.setAttribute('src', '');\n\n    return (\n        <Modal active={false} id={`modal_${item.id}`}>\n            <ModalContent onClose={onClose}>\n                <iframe ref={iframeRef} width=\"100%\" height=\"500px\" title=\"trailer\"></iframe>\n            </ModalContent>\n        </Modal>\n    )\n}\n\nexport default HeroSlide;\n"]},"metadata":{},"sourceType":"module"}